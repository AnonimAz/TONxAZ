<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clicker Game</title>
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-firestore.js"></script>
</head>
<body>
  <h1>Clicker Game</h1>
  <p id="username"></p>
  <p id="clicks">Click Count: 0</p>
  <button id="clickButton">Click</button>

  <script>
    // Firebase konfiqurasiyası
    const firebaseConfig = {
      apiKey: "AIzaSyBN0GwPPmbCqt_l0wFHiGHuufNW0EwtT50",
      authDomain: "tontapbot.firebaseapp.com",
      projectId: "tontapbot",
      storageBucket: "tontapbot.appspot.com",
      messagingSenderId: "871302652341",
      appId: "1:871302652341:web:b37d27e11ddc2d416bb9fc",
      measurementId: "G-PGTL670602"
    };

    // Firebase tətbiqini başlatmaq
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore(app);

    // Istifadəçi adı və click sayı
    let userId = "user123";  // Bu dəyişəni istifadəçi ilə əlaqələndirmək olar
    let clicks = 0;

    // Firestore-da istifadəçini tapmaq və məlumatları almaq
    function getUserData() {
      const userRef = db.collection('users').doc(userId);
      userRef.get().then((doc) => {
        if (doc.exists) {
          const userData = doc.data();
          clicks = userData.clicks;
          document.getElementById("clicks").innerText = "Click Count: " + clicks;
        } else {
          // İstifadəçi tapılmadısa, yeni istifadəçi yaradın
          userRef.set({
            username: "User123",  // İstifadəçinin adı burada müəyyən edilə bilər
            clicks: 0,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()  // Yaradılma tarixi
          });
          document.getElementById("clicks").innerText = "Click Count: " + clicks;
        }
      });
    }

    // Click düyməsi basıldığında `clicks` sayını artırmaq
    document.getElementById("clickButton").addEventListener("click", () => {
      clicks += 1;
      db.collection('users').doc(userId).update({
        clicks: clicks
      }).then(() => {
        document.getElementById("clicks").innerText = "Click Count: " + clicks;
      });
    });

    // İlk dəfə səhifə yükləndikdə istifadəçi məlumatlarını götürmək
    window.onload = getUserData;
  </script>
</body>
</html>
